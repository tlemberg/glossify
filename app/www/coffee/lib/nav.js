// Generated by CoffeeScript 1.9.1
(function() {
  define(['jquery', 'hbs!../../hbs/src/app', 'hbs!../../hbs/src/alert', 'hbs!../../hbs/src/modal', 'pageview', 'utils', 'constants', 'storage'], function($, appTemplate, alertTemplate, modalTemplate, pageview, utils, constants, storage) {
    var _hideAlert, _hideModal, _initPages, _loadPage, _refreshPage, _showAlert, _showModal;
    _initPages = function() {
      $("body").html(appTemplate({
        pages: constants.pages
      }));
      _hideAlert();
      return _hideModal();
    };
    _loadPage = function(page) {
      var template;
      template = constants.templateMap[page];
      constants.pageActionMap[page]['load'](template);
      _hideAlert();
      storage.setPage(page);
      return pageview.formatPageDimensions(page);
    };
    _refreshPage = function() {
      var page;
      page = storage.getPage();
      constants.pageActionMap[page]['refresh']();
      return pageview.formatPageDimensions(page);
    };
    _showAlert = function(message) {
      $(".alert-div").html(alertTemplate({
        message: message
      }));
      $(".alert-div").css("visibility", "visible");
      console.log(pageview.getAlertHeight());
      console.log(utils.withUnit(-1 * pageview.getAlertHeight(), 'px'));
      $(".alert-div").css("margin-top", utils.withUnit(-1 * pageview.getAlertHeight(), 'px'));
      $(".alert-div").show();
      return $(".alert-div").animate({
        "margin-top": "0px"
      }, 500, function() {
        console.log("create");
        return $(".alert-div .alert-btn").click(function(event) {
          console.log("click it");
          return _hideAlert();
        });
      });
    };
    _hideAlert = function() {
      $(".alert-div").css("margin-top", "0px");
      return $(".alert-div").animate({
        "margin-top": utils.withUnit(-1 * pageview.getAlertHeight(), 'px')
      }, 500, function() {
        return $(".alert-div").hide();
      });
    };
    _showModal = function(html) {
      $(".modal-div").html(modalTemplate({
        html: html
      }));
      $(".modal-div").css("visibility", "visible");
      return $(".modal-div").show();
    };
    _hideModal = function() {
      return $(".modal-div").hide();
    };
    return {
      initPages: function() {
        return _initPages();
      },
      loadPage: function(page) {
        return _loadPage(page);
      },
      refreshPage: function() {
        return _refreshPage();
      },
      showAlert: function(message) {
        return _showAlert(message);
      },
      hideAlert: function() {
        return _hideAlert();
      },
      showModal: function(html) {
        return _showModal(html);
      },
      hideModal: function() {
        return _hideModal();
      }
    };
  });

}).call(this);
