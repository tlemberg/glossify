// Generated by CoffeeScript 1.9.1
(function() {
  define(['utils', 'nav', 'css'], function(utils, nav, css) {
    var PICKER_TILE_MARGIN, _dictionary, _loadPage, _nav, _preloadPage, _refreshPage, _registerEvents, _setPickerCss, _setPickerHtml, _userProfile;
    _nav = void 0;
    _userProfile = void 0;
    _dictionary = void 0;
    PICKER_TILE_MARGIN = 10;
    _preloadPage = function() {
      return console.log('preload');
    };
    _refreshPage = function() {
      return _setPickerCss();
    };
    _loadPage = function(params) {
      _setPickerHtml();
      return _registerEvents();
    };
    _setPickerHtml = function() {
      var fn, i, pickerHtml, r;
      pickerHtml = '';
      fn = function(r) {
        var c, fn1, j;
        pickerHtml += "<div class='overview-row'>";
        fn1 = function(c) {
          var tileId;
          tileId = r * 4 + c + 1;
          pickerHtml += "<a class='overview-tile-link' data-tile-id='" + tileId + "'>";
          if (c === 0) {
            pickerHtml += "<div class='overview-tile overview-tile-left'>";
          } else {
            pickerHtml += "<div class='overview-tile'>";
          }
          pickerHtml += "<div class='overview-tile-text'></div>";
          return pickerHtml += "</div></a>";
        };
        for (c = j = 0; j <= 3; c = ++j) {
          fn1(c);
        }
        return pickerHtml += "</div>";
      };
      for (r = i = 0; i <= 99; r = ++i) {
        fn(r);
      }
      return $('#overview-picker').html(pickerHtml);
    };
    _setPickerCss = function() {
      var marginWidth, rowWidth, tileWidth;
      rowWidth = utils.appWidth();
      marginWidth = PICKER_TILE_MARGIN;
      tileWidth = (rowWidth - marginWidth * 5) / 4;
      $('.overview-tile').css('width', tileWidth + "px");
      $('.overview-tile').css('height', tileWidth + "px");
      $('.overview-tile').css('margin-right', marginWidth);
      $('.overview-tile-left').css('margin-left', marginWidth);
      return $('.overview-tile').css('margin-top', marginWidth);
    };
    _registerEvents = function() {
      return $('.overview-tile-link').click(function(event) {
        var tileId;
        event.preventDefault();
        tileId = $(this).data("tile-id");
        return _nav.loadPage('study', {
          userProfile: _userProfile,
          dictionary: _dictionary,
          tileId: tileId
        });
      });
    };
    return {
      preloadPage: function() {
        _nav = require('nav');
        return _preloadPage();
      },
      refreshPage: function() {
        return _refreshPage();
      },
      loadPage: function(params) {
        return _loadPage(params);
      }
    };
  });

}).call(this);
