// Generated by CoffeeScript 1.9.1
(function() {
  define(['strings', 'utils', 'nav', 'css', 'api'], function(strings, utils, nav, css, api) {
    var _loadPage, _nav, _preloadPage, _refreshPage, _registerEvents, _validateEmail, _validatePassword;
    _nav = void 0;
    _preloadPage = function(userProfile, dictionary, params) {
      return _registerEvents();
    };
    _refreshPage = function(userProfile, dictionary, params) {
      return console.log("refresh");
    };
    _loadPage = function(userProfile, dictionary, params) {
      return console.log("load");
    };
    _registerEvents = function() {
      return $('#signup-btn').click(function(event) {
        var email, password1, password2;
        email = $('#signup-email-input').val();
        password1 = $('#signup-password-input').val();
        password2 = $('#signup-retype-password-input').val();
        if (!_validateEmail(email)) {
          $('#signup-error').html(strings.getString('invalidEmail'));
        } else if (!_validatePassword(password1, password2)) {
          $('#signup-error').html(strings.getString('invalidPassword'));
        } else {
          $('#signup-error').html('');
        }
        return api.createUser(email, password1, function(json) {
          return console.log(json);
        });
      });
    };
    _validateEmail = function(email) {
      return email.match(/^([\w.-]+)@([\w.-]+)\.([a-zA-Z.]{2,6})$/i) != null;
    };
    _validatePassword = function(password1, password2) {
      return password1 === password2;
    };
    return {
      preloadPage: function(userProfile, dictionary, params) {
        _nav = require('nav');
        return _preloadPage(userProfile, dictionary, params);
      },
      refreshPage: function(userProfile, dictionary, params) {
        return _refreshPage(userProfile, dictionary, params);
      },
      loadPage: function(userProfile, dictionary, params) {
        return _loadPage(userProfile, dictionary, params);
      }
    };
  });

}).call(this);
