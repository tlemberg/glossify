// Generated by CoffeeScript 1.9.2
(function() {
  define(['utils'], function(utils) {
    var ACCESS_TOKEN_KEY, ACCOUNT_CONFIRMED_KEY, BOX_KEY, DICTIONARY_KEY, LANGUAGE_KEY, PAGE_KEY, PROGRESS_KEY, PROGRESS_UPDATES_KEY, SECTION_KEY, USER_PROFILE_KEY, _addProgressUpdate, _clearProgressUpdates, _getAccessToken, _getAccountConfirmed, _getBox, _getDictionary, _getLanguage, _getLocalStorageItem, _getPage, _getPlan, _getProgress, _getProgressUpdates, _getSection, _getUserProfile, _isLoggedIn, _logout, _removeDictionary, _removeLocalStorageItem, _removePlan, _removeProgress, _setAccessToken, _setAccountConfirmed, _setBox, _setDictionary, _setLanguage, _setLocalStorageItem, _setPage, _setPlan, _setProgress, _setSection, _setUserProfile;
    PAGE_KEY = 'page';
    ACCESS_TOKEN_KEY = 'token';
    USER_PROFILE_KEY = 'user_profile';
    DICTIONARY_KEY = 'dictionary';
    LANGUAGE_KEY = 'lang';
    SECTION_KEY = 'section';
    BOX_KEY = 'box';
    PROGRESS_KEY = 'progress';
    PROGRESS_UPDATES_KEY = 'card_updates';
    ACCOUNT_CONFIRMED_KEY = 'account_confirmed';
    _getLocalStorageItem = function(k) {
      return JSON.parse(localStorage.getItem(k));
    };
    _setLocalStorageItem = function(k, v) {
      return localStorage.setItem(k, JSON.stringify(v));
    };
    _removeLocalStorageItem = function(k) {
      return localStorage.removeItem(k);
    };
    _logout = function() {
      var constants, i, lang, len, ref;
      _removeLocalStorageItem(PAGE_KEY);
      _removeLocalStorageItem(ACCESS_TOKEN_KEY);
      _removeLocalStorageItem(USER_PROFILE_KEY);
      _removeLocalStorageItem(LANGUAGE_KEY);
      _removeLocalStorageItem(SECTION_KEY);
      _removeLocalStorageItem(BOX_KEY);
      constants = require('constants');
      ref = Object.keys(constants.langMap);
      for (i = 0, len = ref.length; i < len; i++) {
        lang = ref[i];
        _removeDictionary(lang);
        _removePlan(lang);
        _removeProgress(lang);
      }
      return _clearProgressUpdates();
    };
    _getPage = function() {
      return _getLocalStorageItem(PAGE_KEY);
    };
    _setPage = function(v) {
      return _setLocalStorageItem(PAGE_KEY, v);
    };
    _getAccessToken = function() {
      return _getLocalStorageItem(ACCESS_TOKEN_KEY);
    };
    _setAccessToken = function(v) {
      return _setLocalStorageItem(ACCESS_TOKEN_KEY, v);
    };
    _getUserProfile = function() {
      return _getLocalStorageItem(USER_PROFILE_KEY);
    };
    _setUserProfile = function(v) {
      return _setLocalStorageItem(USER_PROFILE_KEY, v);
    };
    _getLanguage = function() {
      return _getLocalStorageItem(LANGUAGE_KEY);
    };
    _setLanguage = function(v) {
      return _setLocalStorageItem(LANGUAGE_KEY, v);
    };
    _getDictionary = function(lang) {
      return _getLocalStorageItem("dictionary_" + lang);
    };
    _setDictionary = function(lang, v) {
      return _setLocalStorageItem("dictionary_" + lang, v);
    };
    _removeDictionary = function(lang) {
      return _removeLocalStorageItem("dictionary_" + lang);
    };
    _getSection = function() {
      return _getLocalStorageItem(SECTION_KEY);
    };
    _setSection = function(v) {
      return _setLocalStorageItem(SECTION_KEY, v);
    };
    _getBox = function() {
      return _getLocalStorageItem(BOX_KEY);
    };
    _setBox = function(v) {
      return _setLocalStorageItem(BOX_KEY, v);
    };
    _getAccountConfirmed = function() {
      return _getLocalStorageItem(ACCOUNT_CONFIRMED_KEY);
    };
    _setAccountConfirmed = function(v) {
      return _setLocalStorageItem(ACCOUNT_CONFIRMED_KEY, v);
    };
    _clearProgressUpdates = function() {
      return _setLocalStorageItem(PROGRESS_UPDATES_KEY, {});
    };
    _getProgressUpdates = function() {
      return _getLocalStorageItem(PROGRESS_UPDATES_KEY);
    };
    _addProgressUpdate = function(phraseId, progressValue) {
      var progressUpdates;
      progressUpdates = _getProgressUpdates();
      if (progressUpdates == null) {
        progressUpdates = {};
      }
      progressUpdates[phraseId] = progressValue;
      return _setLocalStorageItem(PROGRESS_UPDATES_KEY, progressUpdates);
    };
    _getProgress = function(phraseId) {
      var lang, progress, ref;
      lang = _getLanguage();
      progress = _getLocalStorageItem("progress_" + lang);
      return (ref = progress[phraseId]) != null ? ref : 0;
    };
    _setProgress = function(phraseId, progressValue) {
      var lang, progress, ref;
      lang = _getLanguage();
      progress = (ref = _getLocalStorageItem("progress_" + lang)) != null ? ref : {};
      progress[phraseId] = progressValue;
      _setLocalStorageItem("progress_" + lang, progress);
      return _addProgressUpdate(phraseId, progressValue);
    };
    _removeProgress = function(lang) {
      return _removeLocalStorageItem("progress_" + lang);
    };
    _getPlan = function(lang) {
      return _getLocalStorageItem("plan_" + lang);
    };
    _setPlan = function(lang, v) {
      return _setLocalStorageItem("plan_" + lang, v);
    };
    _removePlan = function(lang) {
      return _removeLocalStorageItem("plan_" + lang);
    };
    _isLoggedIn = function() {
      var dictionary, lang, userProfile;
      userProfile = _getUserProfile();
      lang = _getLanguage();
      console.log(userProfile);
      console.log(lang);
      if ((userProfile != null) && (lang != null)) {
        dictionary = _getDictionary(lang);
        if (dictionary != null) {
          return true;
        }
      }
      return false;
    };
    return {
      logout: function() {
        return _logout();
      },
      getPage: function() {
        return _getPage();
      },
      setPage: function(v) {
        return _setPage(v);
      },
      getAccessToken: function() {
        return _getAccessToken();
      },
      setAccessToken: function(v) {
        return _setAccessToken(v);
      },
      getUserProfile: function() {
        return _getUserProfile();
      },
      setUserProfile: function(v) {
        return _setUserProfile(v);
      },
      getLanguage: function() {
        return _getLanguage();
      },
      setLanguage: function(v) {
        return _setLanguage(v);
      },
      getDictionary: function(lang) {
        return _getDictionary(lang);
      },
      setDictionary: function(lang, v) {
        return _setDictionary(lang, v);
      },
      getSection: function() {
        return _getSection();
      },
      setSection: function(v) {
        return _setSection(v);
      },
      getBox: function() {
        return _getBox();
      },
      setBox: function(v) {
        return _setBox(v);
      },
      getAccountConfirmed: function() {
        return _getAccountConfirmed();
      },
      setAccountConfirmed: function(v) {
        return _setAccountConfirmed(v);
      },
      getProgressUpdates: function() {
        return _getProgressUpdates();
      },
      clearProgressUpdates: function() {
        return _clearProgressUpdates();
      },
      addProgressUpdate: function(phraseId, progressValue) {
        return _addProgressUpdate(phraseId, progressValue);
      },
      getProgress: function(phraseId) {
        return _getProgress(phraseId);
      },
      setProgress: function(phraseId, progressValue) {
        return _setProgress(phraseId, progressValue);
      },
      getPlan: function(lang) {
        return _getPlan(lang);
      },
      setPlan: function(lang, v) {
        return _setPlan(lang, v);
      },
      isLoggedIn: function() {
        return _isLoggedIn();
      }
    };
  });

}).call(this);
