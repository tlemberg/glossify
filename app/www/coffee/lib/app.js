// Generated by CoffeeScript 1.10.0
(function() {
  requirejs.config({
    baseUrl: 'coffee/lib',
    paths: {
      jquery: '../../js/jquery-2.1.3.min',
      hbs: '../../require-handlebars-plugin/hbs'
    }
  });

  requirejs(['jquery', 'nav', 'storage', 'api'], function($, nav, storage, url, api) {
    $(document).ready(function(event) {
      nav.initPages();
      api = require('api');
      (function() {
        var progressUpdates;
        if (storage.isLoggedIn() && navigator.onLine) {
          progressUpdates = storage.getProgressUpdates();
          console.log(progressUpdates);
          if ((progressUpdates != null) && !storage.progressUpdatesEmpty()) {
            api.updateProgress(function(json) {
              return console.log('update progress');
            });
          }
        }
        console.log('timer progress');
        return setTimeout(arguments.callee, 30000);
      })();
      if (storage.isLoggedIn()) {
        return nav.loadPage('manage');
      } else {
        return nav.loadPage('login');
      }
    });
    return $(window).resize(function(event) {
      return nav.refreshPage();
    });
  });

}).call(this);
